db.posts.aggregate({$project:{'comments.author': 1}}, {$unwind: "$comments"}, {$project: {'author': '$comments.author'}}, {$group: {_id:"$author", count: {$sum:1}}}, {$sort:{count: -1}}, {$limit: 10})